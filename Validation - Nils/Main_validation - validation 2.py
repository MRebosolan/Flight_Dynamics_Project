# -*- coding: utf-8 -*-
"""
Created on Mon Feb 24 10:43:19 2020

@author: Nils
"""
import sys, os
sys.path.clear()
sys.path.append(os.path.realpath('..\\svvproject'))
sys.path.append(os.path.realpath('..\\Validation - Nils'))
import Validation_definitions
import matplotlib.pyplot as plt
import numpy as np
#VALIDATION DATA
    #reading and computing twists, max_stress and deflections
    #deflections are of the hinge line
    #twists are taken about the hinge line

interest_nodes = Validation_definitions.reading_inputs('B737(1).INP')

outputs_deflections_bent= Validation_definitions.reading_outputs_deflections_bent('B737(2).RPT', interest_nodes[0])[1]
outputs_deflections_unbent = Validation_definitions.reading_outputs_deflections_unbent('B737(2).RPT', interest_nodes[0])[1]
outputs_deflections_pure_bending= Validation_definitions.reading_outputs_deflections_pure_bending('B737(2).RPT', interest_nodes[0])[1]

average_y_z_deflections_due_torque=Validation_definitions.average_y_z_deflections_due_to_torque_validated_data(outputs_deflections_unbent, outputs_deflections_bent, outputs_deflections_pure_bending)

shear_center_l_e_z=-0.10856995078063854
hinge_line_to_l_e_z=0.1025
shear_center_hinge_line_z=shear_center_l_e_z+hinge_line_to_l_e_z

    #OUTPUTS
twists_validation_data= Validation_definitions.computing_outputs_twist(average_y_z_deflections_due_torque, 0,shear_center_hinge_line_z) #outputs a list of sublists [deflection y and z due to torque, twist]
deflections_validation_data=outputs_deflections_bent

max_stress=(423.467*10**(-3)+414.020*10**(-3))/(2*10**-9)
max_stress_node=2391
max_stress_location=Validation_definitions.reading_max_stress('B737(1).INP', max_stress_node)
max_stress_member=max_stress_location
print(max_stress_location)

#NUMERICAL DATA
span=2.661
number_of_sections=266
twists_values=[0, 1.8499203544501678e-05, 3.6998407089003356e-05, 5.549761063350503e-05, 7.399681417800671e-05, 9.24960177225084e-05, 0.00011099522126701008, 0.00012949442481151178, 0.00014799362835601345, 0.00016649283190051513, 0.00018499203544501683, 0.0002034912389895185, 0.00022199044253402018, 0.00024048964607852188, 0.0002605521318835064, 0.00028061461768849084, 0.00038926319527074574, 0.0004979117728530006, 0.0006065603504352553, 0.0007152089280175102, 0.0008238575055997652, 0.0009325060831820198, 0.0010411546607642748, 0.0011498032383465296, 0.0012584518159287842, 0.001367100393511039, 0.001475748971093294, 0.0015843975486755488, 0.0016930461262578036, 0.0018016947038400578, 0.0019103432814223126, 0.0020189918590045675, 0.0021276404365868223, 0.002236289014169077, 0.002344937591751332, 0.0024551494515940697, 0.002565361311436807, 0.0026755731712795445, 0.0027856008219473353, 0.002895628472615126, 0.003005656123282917, 0.003115683773950708, 0.0032257114246184984, 0.0033357390752862892, 0.00344576672595408, 0.003555794376621871, 0.003665822027289662, 0.0037758496779574527, 0.003885877328625243, 0.0039959049792930345, 0.004105932629960825, 0.004215960280628616, 0.004325987931296407, 0.004436015581964198, 0.004546043232631989, 0.00465607088329978, 0.0047660985339675705, 0.004876126184635361, 0.004986340771369011, 0.005098118640363144, 0.005209896509357277, 0.00532167437835141, 0.005433452247345543, 0.0055452301163396766, 0.00565700798533381, 0.005768785854327943, 0.005880563723322076, 0.005992341592316209, 0.006104119461310342, 0.006215897330304475, 0.0063276751992986085, 0.006439453068292741, 0.006551230937286874, 0.006663008806281007, 0.00677478667527514, 0.006886564544269273, 0.006998342413263406, 0.0071101202822575395, 0.007221898151251673, 0.007333676020245806, 0.007445453889239939, 0.007557231758234072, 0.007669009627228205, 0.007782350778482821, 0.007895691929737436, 0.008009033080992052, 0.008122374232246668, 0.008235715383501284, 0.0083490565347559, 0.008462397686010516, 0.008575738837265132, 0.008689079988519748, 0.008802421139774363, 0.00891576229102898, 0.009029103442283595, 0.009142444593538211, 0.009255785744792825, 0.009369126896047441, 0.009482468047302057, 0.009595809198556673, 0.009709150349811289, 0.009822491501065905, 0.00993583265232052, 0.010049173803575137, 0.010162514954829753, 0.010275856106084369, 0.010389197257338985, 0.010504101690854084, 0.010619193060435043, 0.010734284430016002, 0.010849375799596961, 0.01096446716917792, 0.01107955853875888, 0.011194649908339838, 0.011309741277920797, 0.011346972599681964, 0.01138420392144313, 0.011421435243204298, 0.011458666564965464, 0.011495897886726631, 0.011533129208487798, 0.011570360530248965, 0.011607591852010131, 0.011644823173771298, 0.011682054495532465, 0.011719285817293632, 0.011756517139054798, 0.011793748460815965, 0.011830979782577132, 0.01164509149464405, 0.011459203206710967, 0.011273314918777885, 0.011087426630844803, 0.01090153834291172, 0.010715650054978638, 0.010529761767045556, 0.010343873479112474, 0.010157985191179391, 0.009972096903246309, 0.009786208615313227, 0.009600320327380145, 0.009414432039447066, 0.009228543751513983, 0.00911839142094263, 0.009008239090371276, 0.008898086759799922, 0.008787934429228568, 0.008677782098657215, 0.00856762976808586, 0.008457477437514507, 0.008347325106943153, 0.0082371727763718, 0.008127020445800446, 0.008016868115229092, 0.007906715784657738, 0.007796563454086384, 0.00768641112351503, 0.007576258792943677, 0.007466106462372323, 0.007355954131800969, 0.007245801801229615, 0.0071356494706582615, 0.007025497140086908, 0.006916908091776037, 0.006808319043465166, 0.006699729995154295, 0.006591140946843424, 0.006482551898532555, 0.006373962850221684, 0.006265373801910813, 0.006156784753599942, 0.006048195705289071, 0.0059396066569782, 0.005831017608667329, 0.005722428560356458, 0.005614026448111447, 0.005505624335866435, 0.005397222223621424, 0.005288820111376412, 0.0051804179991314005, 0.005072015886886389, 0.0049636137746413775, 0.004855211662396366, 0.004746809550151354, 0.004638407437906343, 0.004530005325661331, 0.00442160321341632, 0.004314764383431791, 0.004207925553447262, 0.004101086723462734, 0.003994247893478205, 0.0038874090634936766, 0.0037805702335091504, 0.003673731403524622, 0.0035668925735400938, 0.0034600537435555655, 0.003353214913571037, 0.003246376083586509, 0.0031395372536019805, 0.0030326984236174522, 0.002925859593632924, 0.002819020763648393, 0.002712181933663867, 0.002605343103679336, 0.00249850427369481, 0.0023916654437102836, 0.0022848266137257527, 0.0021779877837412266, 0.0020711489537566957, 0.0019643101237721695, 0.0018574712937876388, 0.0017521957460635955, 0.0016469201983395475, 0.0015416446506155042, 0.0014363691028914563, 0.001331093555167413, 0.001225818007443365, 0.0011205424597193216, 0.0010152669119952737, 0.0009099913642712304, 0.0008047158165471825, 0.0006994402688231393, 0.0005941647210990914, 0.0004888891733750481, 0.0003836136256510001, 0.00027852501399281635, 0.00017343640233462792, 6.834779067644416e-05, -3.674082098174426e-05, -0.000141829432639928, -0.00024691804429811644, -0.0003520066559563002, -0.000457095267614484, -0.0005621838792726724, -0.0006672724909308562, -0.0007707978203285617, -0.0008743231497262627, -0.0009778484791239683, -0.0010813738085216692, -0.0011848991379193748, -0.0012884244673170757, -0.0013919497967147814, -0.0014954751261124822, -0.0015990004555101879, -0.0017025257849078888, -0.0018060511143055944, -0.0019095764437032953, -0.002013101773101001, -0.002116627102498702, -0.0022201524318964075, -0.0023236777612941086, -0.002427203090691814, -0.002530728420089515, -0.0026342537494872206, -0.0027377790788849217, -0.002841304408282627, -0.002944829737680328, -0.0030483550670780293, -0.0031518803964757348, -0.003253842443612953, -0.0033558044907501757, -0.003457766537887394, -0.0035597285850246167, -0.003661690632161835, -0.0037636526792990577, -0.003865614726436276, -0.003967576773573499]
deflection_values=[[0.0, 0.02989506051310235, 0.0019564212279267953], [0.01, 0.028694356081700047, 0.0018389302154141333], [0.02, 0.027498727457891118, 0.0017217375855430046], [0.03, 0.026308174641675532, 0.0016048433383134086], [0.04, 0.02512269763305324, 0.001488247473725346], [0.05, 0.023942426580936867, 0.0013719499917788159], [0.06, 0.022767361485326373, 0.001255950892473819], [0.07, 0.02159750234622171, 0.0011402501758103556], [0.08, 0.02043284916362285, 0.0010248478417884243], [0.09, 0.019273401937529747, 0.000909743890408027], [0.1, 0.01811916066794237, 0.0007949383216691623], [0.11, 0.016970125354860678, 0.0006804311355718301], [0.12, 0.01582642614719728, 0.0005662380363562557], [0.13, 0.014688063044952137, 0.0004523590240224399], [0.14, 0.013555045537171276, 0.00033879410103535517], [0.15, 0.012427364134808497, 0.0002255432652959422], [0.16, 0.011305556551048519, 0.00011260670229920552], [0.17, 0.010189215221592017, -1.2874900798265365e-19], [0.18, 0.009078470295343867, -0.00011226113736145382], [0.19, 0.007973321772296272, -0.00022416100554493518], [0.2, 0.00687389980135411, -0.00033569960455044916], [0.21, 0.005780334531422241, -0.00044686123013777597], [0.22, 0.004692625962492882, -0.0005576301780667001], [0.23, 0.003610904243470896, -0.0006679907440970023], [0.24, 0.0025351693743485082, -0.0007779429282286905], [0.25, 0.0014655515040305723, -0.0008874710262215518], [0.26, 0.00040218078142196124, -0.00099655933383537], [0.27, -0.00065494279348511, -0.0011051921468299315], [0.28, -0.0017056890717857677, -0.001213369465205249], [0.29, -0.002750058053487804, -0.0013210755847211087], [0.3, -0.0037879195896863586, -0.0014282948011373013], [0.31, -0.004819143531476558, -0.0015350114102136159], [0.32, -0.005843729878866179, -0.0016412097077098424], [0.33, -0.006861548482950371, -0.001746889693625997], [0.34, -0.00787246919482426, -0.0018520356637218732], [0.35000000000000003, -0.008876482525477833, -0.0019566318904676756], [0.36, -0.009873467815029218, -0.0020606626908360147], [0.37, -0.010863425063486566, -0.002164128064826912], [0.38, -0.011846225240081627, -0.0022670123113149557], [0.39, -0.012821737077772889, -0.0023692997231914087], [0.4, -0.013789960576568429, -0.0024709745962160695], [0.41000000000000003, -0.014750765587563693, -0.0025720369303889614], [0.42, -0.015704152110766756, -0.002672471021469883], [0.43, -0.01664998999727306, -0.002772261165218638], [0.44, -0.01758814909817803, -0.002871391657395028], [0.45, -0.01851862941348976, -0.002969862497999078], [0.46, -0.019441300794303683, -0.0030676579827905925], [0.47000000000000003, -0.020356033091715228, -0.003164762407529376], [0.48, -0.021262826305732466, -0.003261160067975233], [0.49, -0.022161550287450857, -0.0033568509641281963], [0.5, -0.02305220503687848, -0.003451819391748072], [0.51, -0.02393466040511076, -0.0035460496465946675], [0.52, -0.024808786243243126, -0.0036395260244277933], [0.53, -0.02567458255128367, -0.003732232821007257], [0.54, -0.026531919180327837, -0.003824170036333095], [0.55, -0.02738079613038369, -0.0039153219661651195], [0.56, -0.028221083252546672, -0.004005672906263142], [0.5700000000000001, -0.02905265039791223, -0.0040952071523869754], [0.58, -0.029875496431809805, -0.004183924698878824], [0.59, -0.030689482851091625, -0.004271809798537777], [0.6, -0.031494488995787134, -0.004358846793385839], [0.61, -0.03229051486590478, -0.004445019979182829], [0.62, -0.03307743031254041, -0.004530329355928791], [0.63, -0.03385523533570248, -0.0046147592193835464], [0.64, -0.03462379978648682, -0.004698293865306917], [0.65, -0.035382993515989274, -0.004780917589458725], [0.66, -0.0361328165242183, -0.004862630391839019], [0.67, -0.036873138662269725, -0.004943416568207624], [0.68, -0.037603959930152045, -0.005023260414324366], [0.6900000000000001, -0.03832515017896106, -0.005102146225949069], [0.7000000000000001, -0.03903657925979262, -0.005180074003081787], [0.71, -0.03973824717265516, -0.005257028041482347], [0.72, -0.040430023768644546, -0.0053329926369105815], [0.73, -0.04111190904776926, -0.005407952085126318], [0.74, -0.0417837728611251, -0.005481890681889389], [0.75, -0.042445485059807886, -0.005554808427199851], [0.76, -0.04309704564382614, -0.005626689616817537], [0.77, -0.04373832446427564, -0.005697518546502281], [0.78, -0.044369191372252245, -0.005767279512013918], [0.79, -0.044989646367764397, -0.00583597251335251], [0.8, -0.04559955930190794, -0.00590358184627789], [0.81, -0.04619893017469137, -0.005970091806549902], [0.8200000000000001, -0.04678762883721048, -0.006035486689928378], [0.8300000000000001, -0.04736551565180204, -0.006099766422574464], [0.84, -0.04793260010725032, -0.006162915371950819], [0.85, -0.04848875205465153, -0.006224917833817295], [0.86, -0.049033971494014505, -0.006285758103933733], [0.87, -0.049568128276435426, -0.006345436182300207], [0.88, -0.05009109225301048, -0.006403936364676563], [0.89, -0.05060286342374851, -0.006461242946822649], [0.9, -0.05110331163974569, -0.006517340224498316], [0.91, -0.051592306752098235, -0.006572228197703636], [0.92, -0.05206984876081494, -0.0066258911621984665], [0.93, -0.05253580751699201, -0.006678313413742653], [0.9400000000000001, -0.05299018302063829, -0.006729479248096054], [0.9500000000000001, -0.05343284512284996, -0.006779372961018521], [0.96, -0.05386366367472319, -0.006827994552510137], [0.97, -0.05428263867626686, -0.006875328318330755], [0.98, -0.05468963997857712, -0.006921358554240238], [0.99, -0.055084667581662826, -0.006966069555998438], [1.0, -0.05546759133662014, -0.007009461323605444], [1.01, -0.05583828109454525, -0.0070515181528211165], [1.02, -0.05619673685544704, -0.007092224339405312], [1.03, -0.056542828470421636, -0.007131564179117899], [1.04, -0.05687642579056526, -0.007169537671958962], [1.05, -0.05719752881588673, -0.007206129113688368], [1.06, -0.05750600739748224, -0.00724132280006598], [1.07, -0.057801852046837666, -0.007275102927187008], [1.08, -0.058084940968966305, -0.007307469580501301], [1.09, -0.0583551451495962, -0.007338407067556962], [1.1, -0.05861246458873662, -0.007367899684113861], [1.11, -0.05885676913748417, -0.0073959317259318785], [1.12, -0.05908805879584811, -0.00742250319301111], [1.1300000000000001, -0.059306203414925034, -0.007447598381111437], [1.1400000000000001, -0.05951107284581158, -0.007471201585992737], [1.1500000000000001, -0.05970313966454112, -0.007493318188592234], [1.16, -0.05988193129427565, -0.007513942879956925], [1.17, -0.0600474477350155, -0.007533075660086812], [1.18, -0.06019955883784832, -0.0075507165289819015], [1.19, -0.06033826460277445, -0.007566865486642195], [1.2, -0.06046356502979416, -0.007581522533067698], [1.21, -0.06057546011890778, -0.0075946876682584106], [1.22, -0.060673949870115616, -0.007606360892214341], [1.23, -0.06075890413450535, -0.007616542204935488], [1.24, -0.06083032291207731, -0.0076252473106620845], [1.25, -0.06088820620283175, -0.007632476209394132], [1.26, -0.06093255400676903, -0.007638228901131632], [1.27, -0.06096336632388944, -0.0076425053858745935], [1.28, -0.06098051300528065, -0.007645305663623014], [1.29, -0.06098547843130636, -0.007646661360577651], [1.3, -0.06097703852177133, -0.00764657205770198], [1.31, -0.06095532342554928, -0.007645069163476007], [1.32, -0.06092046329151386, -0.007642168382139509], [1.33, -0.06087258826853875, -0.007637885417932276], [1.34, -0.0608118285054976, -0.007632251679334329], [1.35, -0.060738314151264114, -0.007625282870585471], [1.36, -0.06065230550362455, -0.007617010400165741], [1.37, -0.060553932711452596, -0.007607449972314951], [1.3800000000000001, -0.06044332592362192, -0.00759661729127293], [1.3900000000000001, -0.06032061528900619, -0.0075845437655197336], [1.4000000000000001, -0.06018593095647909, -0.007571245099295206], [1.41, -0.06003940307491425, -0.007556736996839185], [1.42, -0.05988116179318534, -0.007541050866631756], [1.43, -0.05971074741667287, -0.007524182534290408], [1.44, -0.059528749787605986, -0.0075061520145255165], [1.45, -0.059335299054889226, -0.007486959307337014], [1.46, -0.05913039521851442, -0.007466620116965051], [1.47, -0.05891416842738613, -0.007445150147649782], [1.48, -0.058686748830408905, -0.007422549399391132], [1.49, -0.058448136427574654, -0.007398833576429257], [1.5, -0.058198461367787876, -0.007374002678764091], [1.51, -0.05793785379995316, -0.007348072410635793], [1.52, -0.057666313724062335, -0.007321042772044288], [1.53, -0.05738397128901995, -0.007292929467229736], [1.54, -0.05709095664373058, -0.007263748200432303], [1.55, -0.0567872697881861, -0.007233498971651918], [1.56, -0.05647304087129107, -0.007202197485128743], [1.57, -0.05614840004194997, -0.007169843740862717], [1.58, -0.055813347300154706, -0.007136453443094003], [1.59, -0.055468012794809854, -0.007102026591822536], [1.6, -0.05511252667481992, -0.007066578891288484], [1.61, -0.05474688894017683, -0.007030126045732013], [1.62, -0.054371229739785074, -0.006992668055153067], [1.6300000000000001, -0.05398566973372977, -0.006954220558164886], [1.6400000000000001, -0.053590218410807994, -0.006914783622469936], [1.6500000000000001, -0.05318500591992466, -0.006874372952308387], [1.6600000000000001, -0.05277016240998464, -0.006832988547680191], [1.67, -0.05234568788098014, -0.006790646112825517], [1.68, -0.05191171248181603, -0.006747361351984537], [1.69, -0.05146836636139722, -0.00670313426515721], [1.7, -0.051015649519715905, -0.0066579805565837], [1.71, -0.05055369210567698, -0.006611900226263966], [1.72, -0.05008262426818538, -0.006564908978438184], [1.73, -0.049602446007233236, -0.00651700681310631], [1.74, -0.0491132874717255, -0.0064682094345085185], [1.75, -0.04861527767589216, -0.006418532540514936], [1.76, -0.04810841775439895, -0.006367976137741791], [1.77, -0.047592837856150816, -0.006316555930429258], [1.78, -0.047068668130052616, -0.006264271918577301], [1.79, -0.04653590857609663, -0.0062111398064261004], [1.8, -0.04599468934318779, -0.006157159593975623], [1.81, -0.045445140580231025, -0.00610234698546604], [1.82, -0.04488726228721862, -0.006046717685137549], [1.83, -0.044321184613055425, -0.00599027169299011], [1.84, -0.04374690755773375, -0.00593302471326391], [1.85, -0.04316456127015855, -0.00587497674595891], [1.86, -0.04257427589923468, -0.0058161434953153], [1.87, -0.04197604195599641, -0.005756524920397594], [1.8800000000000001, -0.04136999907829797, -0.00569613676842385], [1.8900000000000001, -0.04075627741504462, -0.005634994743634256], [1.9000000000000001, -0.04013487696622897, -0.0055730988460287855], [1.9100000000000001, -0.03950592788075624, -0.005510464779847632], [1.92, -0.03886956030753172, -0.0054470925450907735], [1.93, -0.03822577424654802, -0.005382997845998393], [1.94, -0.03757469984671033, -0.005318180682570473], [1.95, -0.036916467256923935, -0.005252656759047212], [1.96, -0.036251076477181426, -0.005186441779668798], [1.97, -0.03557865765638807, -0.005119535744435216], [1.98, -0.034899340943449125, -0.0050519543575866625], [1.99, -0.03421312633835713, -0.004983697619123116], [2.0, -0.03352014399001735, -0.004914781233284777], [2.0100000000000002, -0.03282052404733504, -0.004845205200071624], [2.02, -0.03211426651030286, -0.004774985223723861], [2.0300000000000002, -0.031401501527826, -0.004704137008481688], [2.04, -0.030682359248809715, -0.004632660554345094], [2.05, -0.02995683967324661, -0.004560571565554283], [2.06, -0.029225072950041925, -0.004487870042109227], [2.07, -0.028487189228100923, -0.0044145716882501435], [2.08, -0.027743188507416167, -0.004340676503977008], [2.09, -0.026993200936892947, -0.0042662001935300405], [2.1, -0.02623735666543653, -0.004191158461149442], [2.11, -0.02547564620400769, -0.004115551290215961], [2.12, -0.024708209190539926, -0.004039394403601803], [2.13, -0.023935175773939027, -0.003962687801306972], [2.14, -0.02315654595419775, -0.0038854471875716633], [2.15, -0.02237244988022183, -0.003807672562395878], [2.16, -0.021583017700916668, -0.003729379630019826], [2.17, -0.020788249416275245, -0.0036505840946837315], [2.18, -0.019988275175203157, -0.0035712859563875737], [2.19, -0.01918322512660592, -0.003491500919371577], [2.2, -0.018373099270476506, -0.0034112289836357307], [2.21, -0.017558027755720462, -0.0033304858534202626], [2.22, -0.016738140731243356, -0.0032492715287251554], [2.23, -0.015913438197038166, -0.0031676017137906368], [2.24, -0.015084050302010321, -0.0030854921128569204], [2.25, -0.014250106060372858, -0.0030029427256080855], [2.2600000000000002, -0.013411606606811177, -0.002919969256838968], [2.27, -0.012568682090231098, -0.002836571706549579], [2.2800000000000002, -0.011721332510625376, -0.0027527657789801346], [2.29, -0.010869688016899637, -0.0026685514741306426], [2.3000000000000003, -0.010013878757959588, -0.00258394449624132], [2.31, -0.009153904733798096, -0.0024989605495523946], [2.32, -0.00828989609332087, -0.0024135996340638767], [2.33, -0.007421982985433367, -0.0023278774540159836], [2.34, -0.00655016541012865, -0.002241794009408722], [2.35, -0.005674564027268764, -0.0021553650118038767], [2.36, -0.004795318474804466, -0.0020685904558594495], [2.37, -0.003912428752729069, -0.0019814860458156613], [2.38, -0.0030260250099484742, -0.0018940674859127503], [2.39, -0.002136237395368501, -0.0018063347761507198], [2.4, -0.0012430659089826546, -0.001718303620769808], [2.41, -0.0003466406996965876, -0.0016299740197700148], [2.42, 0.0005529080835836586, -0.0015413616773915784], [2.43, 0.001455580440864801, -0.0014524665936345056], [2.44, 0.0023612462232409648, -0.0013633044727390416], [2.45, 0.00326977528180622, -0.0012738910189454104], [2.46, 0.004181167616567338, -0.0011842262322536296], [2.47, 0.005095293078618335, -0.00109432581690393], [2.48, 0.006012021519053334, -0.0010041897728963398], [2.49, 0.0069313529378791094, -0.0009138338044710828], [2.5, 0.007853157186189619, -0.00082325791162818], [2.5100000000000002, 0.008777304115079154, -0.0007324777986078661], [2.52, 0.00970379372455421, -0.0006415091696503929], [2.5300000000000002, 0.010632495865708969, -0.0005503520247557639], [2.54, 0.011563280389637609, -0.0004590220681642346], [2.5500000000000003, 0.012496147296346738, -0.0003675192998758084], [2.56, 0.01343096643693048, -0.00027585942413074077], [2.57, 0.01436760766248285, -0.00018404244092905253], [2.58, 0.015306070973010732, -9.208405451098176e-05], [2.59, 0.016246235708604284, 3.469446951953614e-18], [2.6, 0.01718796223135488, 9.220975153723457e-05], [2.61, 0.018131250541269184, 0.00018452949586045958], [2.62, 0.019075970489440763, 0.0002769592329696681], [2.63, 0.020021991926963578, 0.0003694832586246047], [2.64, 0.0209693148538439, 0.0004621015728252485], [2.65, 0.02191780912117558, 0.0005547984713313442], [2.66, 0.022867344580052518, 0.0006475582499026536]]
x_values=np.arange(0, span , round(span/number_of_sections,4))

max_stress_actual=2559731982.246155

max_stress_member_actual=4

max_stress_percent=abs(max_stress_actual-max_stress)*100/max_stress
print(max_stress_percent)

#Adjusting so that the numerical set of twist and deflections have the same number of points along the span
new_x_set=Validation_definitions.creating_format_x(108, span)
len_twists=len(twists_values)

    #converting the deflections to 108 nodes
new_deflections_num_model= Validation_definitions.converting_deflection_list(new_x_set, deflection_values)
    #converting the twist to 108 nodes
new_twists_num_model= Validation_definitions.converting_twist_list(new_x_set, twists_values, x_values)

#print(new_deflections_num_model)

#ENGAGING IN THE COMPARISON

    #taking the twist values of twists_list
Twists=[]
nodes=[]
for i in range(len(twists_validation_data)):
    Twists.append(twists_validation_data[i][2])
    nodes.append(twists_validation_data[i][0])
    
    #taking the twist values of twists_list actual
    
Twists_actual=[]
for i in range(len(new_twists_num_model)):
    Twists_actual.append(new_twists_num_model[i][1])
    
    #taking the deflection in y and z
new_deflections_num_model_y=[]
new_deflections_num_model_z=[]
for i in range(len(new_deflections_num_model)):
    new_deflections_num_model_y.append(new_deflections_num_model[i][1])
    new_deflections_num_model_z.append(new_deflections_num_model[i][2])
    
    #validation deflections
deflections_validation_data_y=[]
deflections_validation_data_z=[]
for i in range(len(outputs_deflections_bent)):
    deflections_validation_data_y.append(outputs_deflections_bent[i][3])
    deflections_validation_data_z.append(outputs_deflections_bent[i][4])
    


    #plotting
plt.title('twist versus span ')
plt.xlabel('span nodes')
plt.ylabel('twist [rad]')
plt.plot(nodes,Twists, color='blue')
plt.plot(nodes,Twists_actual, color= 'red' )
plt.show()
plt.title('y prime deflection versus span ')
plt.xlabel('span nodes')
plt.ylabel('deflection [m]')
plt.plot(nodes, new_deflections_num_model_y, color='red')
plt.plot(nodes,deflections_validation_data_y, color= 'blue' )
plt.show()
plt.title('z prime deflection versus span ')
plt.xlabel('span nodes')
plt.ylabel('deflection [m]')
plt.plot(nodes, new_deflections_num_model_z, color='red')
plt.plot(nodes,deflections_validation_data_z, color= 'blue' )
plt.show()

#-----------------------------------------------------------------------------
lst_error_deflection= Validation_definitions.deflection_validation(new_deflections_num_model, deflections_validation_data)

lst_error_y=[]
for i in range(len(lst_error_deflection)):
    lst_error_y.append(lst_error_deflection[i][1])

lst_error_z=[]
for i in range(len(lst_error_deflection)):
    lst_error_z.append(lst_error_deflection[i][2])
    
plt.title('y prime deflection versus span error')
plt.xlabel('span nodes')
plt.ylabel('deflections error[m]')
plt.ylim(0, 0.11)
plt.plot(nodes, lst_error_y)
plt.show()
plt.title('z prime deflection versus span error')
plt.xlabel('span nodes')
plt.ylabel('deflections error[m]')
plt.ylim(0.00, 0.1)
plt.plot(nodes, lst_error_z)
plt.show()



lst_variables_twists= Validation_definitions.twist_validation(Twists_actual, Twists)
lst_error_twists=lst_variables_twists[0]

print(lst_variables_twists[1], lst_variables_twists[2])
plt.title('twist versus span error')
plt.xlabel('span nodes')
plt.ylabel('twist error[rad]')
plt.ylim(0, 0.5)
plt.plot(nodes, lst_error_twists)
plt.show()

maximum_minimum_difference_actual=lst_variables_twists[1]
maximum_minimum_difference_validation=lst_variables_twists[2]

lst_max_stress_variables=Validation_definitions.max_stress_validation(max_stress_actual, max_stress, max_stress_member_actual, max_stress_member)
error_max_stress=lst_max_stress_variables[0]
print(lst_max_stress_variables[1])

if lst_max_stress_variables[1]==1:
    print('The stress is on the same member')
else: 
    print('The maximum stress is not on the same member')
    

    

    







